# HTTP REST Protocol (version 1) <br/> Users Microservice

Users microservice implements a REST compatible API, that can be accessed on configured port.
All input and output data is serialized in JSON format. Errors are returned in [standard format]().

* [User class](#class1)
* [UserPage class](#class2)
* [GET /users](#operation1)
* [GET /users/find](#operation2)
* [GET /users/:user_id](#operation3)
* [POST /users](#operation4)
* [PUT /users/:user_id](#operation5)
* [DELETE /users/:user_id](#operation6)

## Data types

### <a name="class1"></a> User class

Represents a user account with his ID, name, email, password and key settings.
It also tracks signup/signin dates. 

**Properties:**
- id: string - unique user id
- name: string - full user name (first and last name)
- email: string - primary user email that is unique and used as login
- created: Date - date and time when user account was created
- active: boolean - true if user account is active, and false for disabled accounts
- time_zone: int - user selected timezone
- language: string - user selected language (and culture)
- theme: string - user selected application color theme
- custom_hdr: Object - custom data summary that is always returned (in list and details)
- custom_dat: Object - custom data details that is returned only when a single object is returned (details)

### <a name="class2"></a> UserPage class

Represents a paged result with subset of requested User objects

**Properties:**
- data: [User] - array of retrieved User page
- count: int - total number of objects in retrieved resultset

## Operations

### <a name="operation1"></a> Method: 'GET', route '/users'

Retrieves a list of users by specified criteria

**Parameters:** 
- email: string - (optional) user email address
- name: string - (optional) user full name
- active: boolean - (optional) user active flag
- search: string - (optional) full-text search by name and email
- skip: int - (optional) start of page (default: 0). Operation returns paged result
- take: int - (optional) page length (max: 100). Operation returns paged result

**Response body:**
Array of User objects or UserPage object if paging was requested or error

### <a name="operation2"></a> Method: 'GET', route '/users/find'

Finds a user by unique id or email

**Parameters:**
- user_id: string - (optional) unique user id
- email: string - (optional) user primary email 

**Response body:**
User account or null if user wasn't found or error

### <a name="operation3"></a> Method: 'GET', route '/users/user_id'

Retrieves user account by its unique id. 
It throws an error when requested account is not found. 

**Parameters:**
- user_id: string - unique user id

**Response body:**
Retrieved User account or error

### <a name="operation4"></a> Method: 'POST', route '/users'

Registers a new user in the system and creates an account for him.

**Request body:**
User account info that includes
  - id: string - (optional) unique user id generated by the client
  - name: string - full user name
  - email: string - unique primary user email address
  - ... - other optional user settings like time_zone, language or theme

**Response body:**
Created User object or error

### <a name="operation5"></a> Method: 'PUT', route '/users/user_id'

Changes user name, primary email or account settings.

**Parameters:**
- user_id: string - unique user id

**Request body:**
User object with new properties (partial updates are supported)

**Response body:**
Updated User object or error

### <a name="operation6"></a> Method: 'DELETE', route '/users/user_id'

Deletes user account from the system (use it carefully!)

**Parameters:** 
- user_id: string - unique user id

**Response body:**
Ocurred error or null for success
